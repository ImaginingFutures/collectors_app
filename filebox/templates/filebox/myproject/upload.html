{% extends 'main.html' %}
{% load django_bootstrap5 django_bootstrap_input_group static %}
{% block content %}

<form action="{% url 'upload' %}" method="POST" class="dropzone" id="my-awesome-dropzone" enctype="multipart/form-data">
    {% csrf_token %}
    {% include '_form_errors.html' %}
    
    <div class="mb-3">
        <label for="{{ form.project.id_for_label }}" class="form-label">{{ form.project.label }}</label>
        {{ form.project }}
    </div>

    <input name="file" type="file" multiple />
    
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% include '_cancel_warning.html' %}


{{ form.media }}

<script>

var mediatypes = 'image/jpeg, image/png, image/tiff, image/gif, image/bmp, image/webp, video/mp4, video/webm, video/ogg, audio/mpeg, audio/mp4, audio/ogg, audio/wav, application/pdf, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation, text/plain, text/csv, text/xml';

Dropzone.options.myAwesomeDropzone = {
  paramName: "file",
  autoProcessQueue: true, 
  uploadMultiple: true,
  parallelUploads: 100,
  maxFiles: 200,
  // aditional configurations
  maxFilesize: 500, // for larger files, ask administrators
  acceptedFiles: mediatypes, // TODO: include application/json and application/zip when functionality is ready. Compare with https://github.com/collectiveaccess/providence/blob/master/app/conf/media_display.conf to check compatibilities with Collective Access
  
};
</script>

{% endblock content %}